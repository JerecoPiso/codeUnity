{% extends 'html/templates/base.html' %}

{% block main_page %}
	{% include 'html/templates/header.html' %}
			
  
    <div class="row question-box ">
        <div class="col l8 s12 m8">
            <div class="my-project">
                <h5 class="project-title">{{question.question}}</h5>
                <!-- <cite>by: Jereco James Piso</cite> <br> -->
                <cite class="time-counter">Posted: <date-posted posted="{{question.date}}"></date-posted></cite>
               
                <!-- <h5>Code</h5> -->
                <pre class="question-code language-{{question.language}}">
                    <code>{{question.code|safe}}</code>
                </pre>
                
                <ul class="comments" id="comment-section" >
                    <div class="MyModal" v-if="popUpAlert">
                        <div class="ModalDialog">
                            <div class="ModalHeaderAlert">
                                <span class="fa fa-exclamation"></span>
                            </div>
                            <div class="ModalContent">
                                <p>Are you sure you want to delete this [ promptMsgExtension ]!</p>
                            </div>
                            <div class="ModalFooter">
                                <button class="btn-ok" @click="toDelete()">OK</button>
                                <button class="btn-cancel" @click="popUpAlert = false">Cancel</button>
                                
                                
                            </div>
                        </div>
                    </div>
                    <div class="MyModal"  v-if="replyModal">
                        <!-- -->
                        <div class="ModalDialog">
                            <div class="ModalHeader">
                                <img src="/media/dp.jpg" class="reply-dp">
                                <p class="reply-name">Jereco James Piso</p>
                                <button @click="replyModal = false"> &times;</button>
                            </div>
                            <div class="ModalContent">
                                
                                <form>
                                    {% csrf_token %}
                                <textarea v-model="replyInfo.reply" id="comment-txt" cols="30" rows="20" placeholder="Write something . . ." required></textarea>
                            </div>
                            <div class="ModalFooter">
                                <button type="button" class="btn-post" @click="secComment()">Reply</button>
                            </form>
                            </div>
                        </div>
                    </div>		
                   
                     <p class="flash-msg" v-if="flashMsg">[flashMsg]</p>
                    <div v-for="info in commentInfo">
                        <img src="/media/dp.jpg" class="commentor-dp">
                        <div class="commentor"> <p class="commentor-name">[info.uname]</p>
                           
                            <p class="comment">[info.comment]</p>
                           
                            <a href="javascript:void(0)" class="btn-reply" @click="replyModal = true;replyInfo.question_id = info.post_id; replyInfo.comment_id = info.id;replyInfo.commentor_id = {{question.asker_id}}; ">Reply</a>
                            <a href="javascript:void(0)" class="btn-delete" @click="promptMsgExtension = 'comment'; comId = info.id;postId = info.post_id;popUpAlert = true;actionToPerform = 'deleteComment'">Delete</a>
                            <!-- deleteComment(info.post_id) -->
                           
                        </div>       
                       
                        <div class="sec-comments" v-for="reply in replies" v-if="info.id == reply.comment_id">
                            
                                <img src="/media/dp.jpg" class="commentor-dp">
                                <div class="commentor"> <p class="commentor-name">Jereco James Piso</p>
                                    <p class="comment">[reply.reply]</p>
                                    <a href="javascript:void(0)" class="btn-reply"  @click="replyModal = true;replyInfo.question_id = info.post_id; replyInfo.comment_id = info.id;replyInfo.commentor_id = {{question.asker_id}}; ">Reply</a>
                                    <a href="javascript:void(0)" class="btn-delete" @click="promptMsgExtension = 'reply';replyId = reply.id;popUpAlert = true;actionToPerform = 'deleteReply'">Delete</a>
                                </div>       
                             
                            </div>
                  
                        </div>
                  
                    <div class="comment-area">
    
                        <form @submit.prevent="addComment({{question.asker_id}}, {{post_id}})">
                           {% csrf_token %}
                           <input type="hidden" value="{{post_id}}" id="post-id">
                            <textarea placeholder="Write your comment here Jereco James Piso . . ." v-model="comment" required></textarea>
                            <div class="summernote" style="margin-bottom: 10px;display: none;">
                                <label style="font-size: 20px;">Code (Optional)</label>
                          
                                <div  id="summernote"></div>
                            </div>
                        
                            <button type="submit" class="btn-comment">Comment</button>
                            <button type="button" class="btn-put-code">Put Code</button>
                        </form>
                      
                    </div>
                    
                </ul>
                <!-- class comments close -->
            </div>      
        </div>
        <div class="col l4 s12 m4">

        </div>
    </div>

	{% include 'html/templates/footer.html' %}

{% endblock %}