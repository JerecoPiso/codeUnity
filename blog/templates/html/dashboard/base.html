<!DOCTYPE html>
<html>
<head>
	{% load static %}
	<title>{{ request.session.title }}</title>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>{{request.session.title}}</title>
	<link rel="stylesheet" type="text/css" href="{% static 'assets/css/materialize.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'assets/fontawesome-free/css/all.min.css' %}">
	{% if request.session.title == 'Home' or  request.session.title == 'Main' or  request.session.title == 'Projects' or  request.session.title == 'Language' or  request.session.title == 'Questions' %}
	<link rel="stylesheet" type="text/css" href="{% static 'assets/css/dashboard/dashzboardddded.css' %}">
	{% endif %}

	{% if request.session.title == 'Projects' %}
	<link rel="stylesheet" type="text/css" href="{% static 'assets/css/dashboard/proojjj.css' %}">
	{% endif %}
	{% if request.session.title == 'Language' %}
	<link rel="stylesheet" type="text/css" href="{% static 'assets/css/dashboard/lannggggggg.css' %}">
	{% endif %}
	{% if request.session.title == 'Questions' %}
	<link rel="stylesheet" type="text/css" href="{% static 'assets/css/dashboard/questionstzzzez.css' %}">
	{% endif %}

</head>
<body>
	

	<div class="flex-container">
		
		<div class="flex-item-1 bg-color" id="side-nav">
			<span class="close">&times;</span>
			<div class="admin-panel">
			<!-- <p class="ap">Admin Panel</p> -->
			<img src="/media/dp.jpg">
			<p id="user-name">Jereco James Piso</p>
			</div>
			 <ul>

			 	<li><span class="fa fa-home"></span><a href="/dashboard/home">Home</a></li>
			 	<li><span class="fa fa-folder"></span><a href="projects">Projects</a></li>
			 	<li><span class="fa fa-language"></span><a href="languages">Languages</a></li>
				 <li><span class="fa fa-question"></span><a href="questions">Questions</a></li>
				 <li><span class="fa fa-users"></span><a href="questions">Developers</a></li>			 	
			 </ul>	
		</div>

		<div class="flex-item-2">

			<div id="top-nav">
				<button id="show-side-nav"><span class="fa fa-bars"></span></button>
				<div class="dropdown">
					<img src="/media/dp.jpg">
				  <div class="dropbtn"><p>Jereco James Piso <span id="down" class="fa fa-sort-down"></span></p></div>
				  <div class="drop-content">
				    <a href="#">Account Settings</a>
				    <a href="logout">Logout</a>
				  </div>
				</div>
			</div>

			{% block body %}



			{% endblock %}
			
		</div>
	</div>
	

<script type="text/javascript" src="{% static 'assets/js/axios.js' %}"></script>
<script type="text/javascript" src="{% static 'assets/js/vue.js' %}"></script>	
<script type="text/javascript" src="{% static 'assets/js/jquery.js' %}"></script>	
<script type="text/javascript" src="{% static 'assets/js/materialize.js' %}"></script>
<script type="text/javascript"> 
$(document).ready(function(){
	$("#show-side-nav").click(function(){
		$("#side-nav").show()
	})
	
	$(".close").click(function(){
		$("#side-nav").hide()
	})

	$(window).resize(function(){
       	if(document.body.clientWidth > 991){
       		$('.flex-item-1').show()
       		// $('#open').hide() 	
       	}else{
			$('.flex-item-1').hide()
		}
   	});
})
 var questions = new Vue({
	 delimiters: ['[', ']'],
	 el: "#questions",
	 data:{
		 question_cat: [],
		 category: '',
		 toShowLanguages: [],
		 id: '',
		 newCategory: '',
		 allQuestions: []
	 },
	 mounted: function(){
		this.getCategories()
		this.getLanguages()
		this.getQuestions()
		
	 },
	 methods:{
		addCategory: function(){
			let data = new FormData()
			data.append("category", questions.category)
			axios.post("addCategory", data, {headers: {'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value}}).then(function(response){
				if(response.data == "Question Category added successfuly"){
					questions.getCategories()
					questions.getCategories()
					questions.category = ""
					alert(response.data)
				}
				
			})
		},
		deleteQuestionCat: function(){
			if (confirm("Are you sure you want to delete this data?") == true) {
				let data = new FormData()
				data.append("id", questions.id)
	
				axios.post("deleteQuestionCategory", data, {headers: {'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value}}).then(function(response){

					alert(response.data)
					questions.getCategories()
					
				})
			} 
		},
		editQuestionCat: function(){
			var newCat = prompt("Enter New Question Category", questions.newCategory)
			if(newCat != "" && newCat != null){			
					let data = new FormData()
					data.append("id", questions.id)
					data.append("category", newCat)
					axios.post("editQuestionCategory", data, {headers: {'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value}}).then(function(response){
						alert(response.data)
						questions.getCategories()
					})			
			}
			
		},
		getCategories: function(){
			 axios.get("getCategory").then(function(response){
				questions.question_cat = response.data
			 })
		 },
		 getQuestions: function(){
			axios.get("getQuestions").then(function(response){
				questions.allQuestions = response.data
				
				
			})
		 },
		 getLanguages: function(){
			axios.get('getLanguages').then(function(response){
				
				if(response.data == "Failed"){
					alert("Unable to retrieve Languages!")
				}else{
				
					questions.toShowLanguages = response.data
				}
			})
		}
	 }
 })
 var projects = new Vue({
 	 delimiters: ['[', ']'],
	 el: "#projects-dash",
	 data:{
		languages: [],
		toShowProjects: []
	 },
	 mounted: function(){
		 
		 this.getLanguages();
		 this.getProjects();
	 },
	 methods:{
		getLanguages: function(){
			axios.get('getLanguages').then(function(response){
				if(response.data == "Failed"){
					alert("Unable to retrieve Languages!")
				}else{
					projects.languages = response.data
				}
			})
		},
		getProjects: function(){
			axios.get('getProjects').then(function(response){
				if(response.data == "Failed"){
					alert("Unable to retrieve Projects!")
				}else{
					
					projects.toShowProjects = response.data
				}
			})
		},
		
	 }
 })
 var languages = new Vue({
	 delimiters: ['[', ']'],
	 el: "#languageFramework",
	 data:{
		language: {category: '', lang: '', id: ''},
		framework: {language_id: '', framework: '', id: '', category: ''},
		toShowLanguages: [],
		toShowFrameworks: [],
		showAddLanguage: false,
		showAddFramework: false,
		languageFunction: '',
		frameworkFunction: '',
		languageBtn: '',
		frameworkBtn: '',
		csrf_token: '',
		languageCtr: 0,
		frameworkCtr: 0
	 },
	 mounted: function(){
		this.getLanguages()
		this.getFrameworks()
	
	
		
	 },
	 methods:{
		Language: function(){
			let data = new FormData()
			data.append("category", languages.language.category)
			data.append("language", languages.language.lang)
		
			if(languages.languageFunction == 'update'){

				data.append("id", languages.language.id)
			}
			axios.post(languages.languageFunction+"Language", data, {headers: {'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value}}).then(function(response){

					alert(response.data)
					languages.language.category = ""
					languages.language.lang = ""
					languages.getLanguages()

			})


		},
		Framework: function(){
			let data = new FormData()
			data.append("framework", languages.framework.framework)
			data.append("language_id", languages.framework.language_id)
			data.append("category", languages.framework.category)
			// alert(languages.framework.framework)
			if(languages.frameworkFunction == 'update'){
				data.append("id", languages.framework.id)
				
			}
		
			
			axios.post(languages.frameworkFunction+"Framework", data, {headers: {'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value}}).then(function(response){
					alert(response.data)
					languages.framework.language_id = ''
					languages.framework.category = ''
					languages.framework.framework = ''
					languages.getFrameworks()
				})
			
		},
		deleteLanguage: function(){
			if (confirm("Are you sure you want to delete this data?") == true) {
				let data = new FormData()
				data.append("id", languages.language.id)
				
				axios.post("deleteLanguage", data, {headers: {'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value}}).then(function(response){

					alert(response.data)
					languages.getLanguages()
					
				})
			} 
		},
		deleteFrameworks: function(){
			if (confirm("Are you sure you want to delete this data?") == true) {
				let data = new FormData()
				data.append("id", languages.framework.id)
	
				axios.post("deleteFramework", data, {headers: {'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value}}).then(function(response){

					alert(response.data)
					languages.getFrameworks()
					
				})
			} 
		},
		getLanguages: function(){
			axios.get('getLanguages').then(function(response){
				if(response.data == "Failed"){
					alert("Unable to retrieve Languages!")
				}else{
					
					languages.toShowLanguages = response.data
					languages.languageCtr = languages.toShowLanguages.length
					
				}
			})
		},
		getFrameworks: function(){
			axios.get('getFrameworks').then(function(response){
			
					languages.toShowFrameworks = response.data
					languages.frameworkCtr = languages.toShowFrameworks.length
					
			})
		}
	 }
 })
 
</script>
</body>
</html>